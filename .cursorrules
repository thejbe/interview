# Cursor Rules for Interview Project

## Database Changes
- **Always Create Migrations**: Any change to the database schema (tables, columns, types) OR security policies (RLS) MUST be captured in a new `.sql` script in `supabase/migrations/`.
- **Naming Convention**: Use timestamps and descriptive names (e.g., `YYYYMMDDHHMMSS_description.sql`).
- **Never Modify Old Migrations**: Always append new changes.
- **Run Migrations**: Use `npx supabase migration up` for local, or provide the SQL content for Cloud Dashboard execution if CLI is unavailable.

## Security (RLS)
- **Avoid Recursion**: Be excessively careful when creating RLS policies that query the same table. Use `SECURITY DEFINER` functions to bypass recursion when fetching context (like `organization_id`).
- **Test Policies**: Verify RLS policies don't block legitimate user flows (like "No Organization Found").

## Code Style
- Use `Next.js` App Router patterns.
- Use `Supabase` TypeScript types generated in `types/supabase.ts`.
